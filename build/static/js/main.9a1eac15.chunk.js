(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=a(5),s=a.n(l),i=a(6),u=a(7),h=a(8),f=a(12),d=a(9),m=a(13),p=a(15),b="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:v},E=function(){return fetch("".concat(b,"/books"),{headers:k}).then(function(e){return e.json()}).then(function(e){return e.books})},y=function(e,t){return fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},S=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(p.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},g=(a(26),a(37)),N=a(36),w=a(34),j=function(e){var t=e.book,a=e.updateShelf,n=[];if(t.authors){var o=!0,c=!1,l=void 0;try{for(var s,i=t.authors[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value;n.push("".concat(u," "))}}catch(h){c=!0,l=h}finally{try{o||null==i.return||i.return()}finally{if(c)throw l}}}return r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.thumbnail:"",")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{value:t.shelf||"none",onChange:function(e){a(t,e.target.value)}},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},t.title?t.title:"No Title"),r.a.createElement("div",{className:"book-authors"},t.authors?n:"No Authors")))},O=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={results:[],query:"",books:[]},a.handleChange=function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,a.setState({query:n}),""!==n&&void 0!==n){e.next=6;break}return e.abrupt("return",a.setState({results:[]}));case 6:return e.next=8,S(n).then(function(e){if(!e||e.hasOwnProperty("error"))a.setState({results:[]});else{var t=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;l.shelf="none";var s=!0,i=!1,u=void 0;try{for(var h,f=a.state.books[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var d=h.value;d.id===l.id&&(l.shelf=d.shelf)}}catch(m){i=!0,u=m}finally{try{s||null==f.return||f.return()}finally{if(i)throw u}}}}catch(m){n=!0,r=m}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}a.setState({results:e})}});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,this.setState({books:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.updateShelf,t=this.state.results;return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(w.a,{className:"close-search",to:"/"},"Close"),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:this.handleChange}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},t.length>0?t.map(function(t){return r.a.createElement(j,{book:t,key:t.id,updateShelf:e})}):"THERE IS NO RESULTS HERE!")))}}]),t}(n.Component),R=function(e){var t=e.books,a=e.section,n=e.updateShelf;return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},a),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t&&t.map(function(e){return r.a.createElement(j,{book:e,key:e.id,updateShelf:n})}))))},x=function(e){var t=e.books,a=e.updateShelf;return r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,r.a.createElement(R,{section:"Currently Reading",books:t.filter(function(e){return"currentlyReading"===e.shelf}),updateShelf:a}),r.a.createElement(R,{section:"Want to Read",books:t.filter(function(e){return"wantToRead"===e.shelf}),updateShelf:a}),r.a.createElement(R,{section:"Read",books:t.filter(function(e){return"read"===e.shelf}),updateShelf:a}))),r.a.createElement("div",{className:"open-search"},r.a.createElement(w.a,{to:"/search"},"Add a book")))},C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},a.updateShelf=function(e,t){y(e,t).then(function(n){e.shelf=t,a.setState(function(t){return{books:t.books.filter(function(t){return t.id!==e.id}).concat([e])}})}).catch(function(e){console.log(e)})},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,this.setState({books:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(g.a,null,r.a.createElement(N.a,{exact:!0,path:"/",render:function(){return r.a.createElement(x,{books:e.state.books,updateShelf:e.updateShelf})}}),r.a.createElement(N.a,{path:"/search",render:function(){return r.a.createElement(O,{books:e.state.books,updateShelf:e.updateShelf})}}),r.a.createElement(N.a,{component:T})))}}]),t}(n.Component),T=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"There is no matches for ",r.a.createElement("code",null,t.pathname)))},A=C,M=(a(31),a(35));c.a.render(r.a.createElement(M.a,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[19,2,1]]]);
//# sourceMappingURL=main.9a1eac15.chunk.js.map